html_text()
directors <- append(directors, detail[1])
})
directors <- c()
lapply(links[1:3], function(link) {
details <- read_html(link) %>%
html_nodes("div.ipc-metadata-list-item__content-container") %>%
html_text()
directors <- append(directors, details[1])
})
rm(directors)
lapply(links[1:3], function(link) {
details <- read_html(link) %>%
html_nodes("div.ipc-metadata-list-item__content-container") %>%
html_text()
directors <- append(directors, details[1])
})
lapply(links[1:3], function(link) {
details <- read_html(link) %>%
html_nodes("div.ipc-metadata-list-item__content-container") %>%
html_text()
details[1]
})
lapply(links[1:3], function(link) {
details <- read_html(link) %>%
html_nodes("div.ipc-metadata-list-item__content-container") %>%
html_text()
return(details[1])
})
lapply(links[1:3], function(link) {
details <- read_html(link) %>%
html_nodes("div.ipc-metadata-list-item__content-container") %>%
html_text()
return(details[1])
}) %>%
unlist()
lapply(links[1:10], function(link) {
details <- read_html(link) %>%
html_nodes("div.ipc-metadata-list-item__content-container") %>%
html_text()
return(details[1])
}) %>%
unlist()
directors <- lapply(links[1:10], function(link) {
details <- read_html(link) %>%
html_nodes("div.ipc-metadata-list-item__content-container") %>%
html_text()
return(details[1])
}) %>%
unlist()
directors
writers <- lapply(links[1:10], function(link) {
details <- read_html(link) %>%
html_nodes("div.ipc-metadata-list-item__content-container") %>%
html_text()
return(details[2])
}) %>%
unlist()
writers
?str_remove
writers <- lapply(links[1], function(link) {
details <- read_html(link) %>%
html_nodes("div.ipc-metadata-list-item__content-container") %>%
html_text()
return(details[2])
}) %>%
unlist()
writers <- lapply(links[1:2], function(link) {
details <- read_html(link) %>%
html_nodes("div.ipc-metadata-list-item__content-container") %>%
html_text()
return(details[2])
}) %>%
unlist()
writers
writers
writers %>%
str_remove("\\(")
writers %>%
str_remove_all("\\(")
writers %>%
str_remove_all("\\(") %>%
str_remove_all("\\)")
writers
writers %>%
str_remove(" \\s*\\([^\\)]+\\)")
writers
writers %>%
str_remove(" \\s*\\([^\\)]+\\)")
writers %>%
str_remove_all(" \\s*\\([^\\)]+\\)")
writers %>%
str_replace_all("()", "")
writers %>%
str_replace_all("(", "")
writers %>%
str_replace_all("\\(", "")
writers %>%
str_replace_all("\\()", "")
writers %>%
str_replace_all("(", "")
writers %>%
str_extract_all("\[(.*?)\]")
writers %>%
str_extract_all("\\[(.*?)\]")
writers %>%
str_extract_all("[(.*?)\]")
writers %>%
str_extract_all("\\([^()]+\\)")
writers %>%
str_extract_all("\\([^()]+\\)") %>% unlist()
writers %>%
str_extract_all("\\([^()]+\\)") #%>% unlist()
writers %>%
str_extract_all("\\([^()]+\\)") %>% unlist()
writers %>%
str_replace_all("\\([^()]+\\)", "") %>% unlist()
writers %>%
str_replace_all("\\([^()]+\\)", ",") %>% unlist()
writers %>%
str_replace_all("\\([^()]+\\)", ", ") %>% unlist()
writers %>%
str_replace_all("\\([^()]+\\)", ", ")
writers <- lapply(links[1:10], function(link) {
details <- read_html(link) %>%
html_nodes("div.ipc-metadata-list-item__content-container") %>%
html_text()
return(details[2])
}) %>%
unlist()
writers %>%
str_replace_all("\\([^()]+\\)", ", ")
links[7]
writers %>%
str_replace_all("\\([^()]+\\)", ", ") %>%
str_squish()
links[2] %>%
read_html() %>%
html_nodes("div.ipc-metadata-list-item__content-container") %>%
html_text()
links[1] %>%
read_html() %>%
html_nodes("div.ipc-metadata-list-item__content-container") %>%
html_text()
directors <- lapply(links, function(link) {
details <- read_html(link) %>%
html_nodes("div.ipc-metadata-list-item__content-container") %>%
html_text()
return(details[1])
}) %>%
unlist()
directors
writers <- lapply(links[1:10], function(link) {
details <- read_html(link) %>%
html_nodes("div.ipc-metadata-list-item__content-container") %>%
html_text()
return(details[2])
}) %>%
unlist()
writers %>%
str_replace_all("\\([^()]+\\)", ", ") %>%
str_squish()
writers
writers %>%
str_replace_all("\\([^()]+\\)", ", ") %>%
str_squish()
writers %>%
str_replace_all("\\([^()]+\\)", "") %>%
str_squish()
writers %>%
str_replace_all("\\([^()]+\\)", ",") %>%
str_squish()
writers %>%
str_replace_all("\\([^()]+\\)", ", ") %>%
str_squish()
writers <- lapply(links[1:10], function(link) {
details <- read_html(link) %>%
html_nodes("div.ipc-metadata-list-item__content-container") %>%
html_text()
return(details[2])
}) %>%
unlist()
writers %>%
str_replace_all("\\([^()]+\\)", ", ") %>%
str_squish()
writers <- lapply(links, function(link) {
details <- read_html(link) %>%
html_nodes("div.ipc-metadata-list-item__content-container") %>%
html_text()
return(details[2])
}) %>%
unlist()
writers %>%
str_replace_all("\\([^()]+\\)", ", ") %>%
str_squish()
writers
writers %>%
str_replace_all("\\([^()]+\\)", ", ") %>%
str_squish()
writers <- writers %>%
str_replace_all("\\([^()]+\\)", ", ") %>%
str_squish()
imdb_top_250 <- tibble(rank = 1:250,
title = titles,
rating = ratings,
director = directors,
writer = writers)
imdb_top_250 %>% View()
?str_split
directors
directors %>%
str_split("[A-Z][^A-Z]*")
directors %>%
str_split("[A-Z][^A-Z]*") %>%
unlist()
str_split("TheLongAndWindingRoad", "[A-Z][^A-Z]*")
writers %>%
str_replace_all("\\([^()]+\\)", ", ") %>%
str_squish()
writers %>%
str_replace_all("\\([^()]+\\)", ", ") %>%
str_squish() %>%
str_sub_all(1, -2)
writers %>%
str_replace_all("\\([^()]+\\)", ", ") %>%
str_squish() %>%
str_sub(1, -2)
writers <- writers %>%
str_replace_all("\\([^()]+\\)", ", ") %>%
str_squish() %>%
str_sub(1, -2)
imdb_top_250 <- tibble(rank = 1:250,
title = titles,
rating = ratings,
director = directors,
writer = writers)
imdb_top_250 %>% View()
str_split("TheLongAndWindingRoad", "[:upper:]")
strsplit("TheLongAndWindingRoad", "[:upper:]")
strsplit("TheLongAndWindingRoad", [:upper:])
strsplit("TheLongAndWindingRoad",split =  [:upper:])
strsplit(x = "TheLongAndWindingRoad",split =  [:upper:])
gsub('([[:upper:]])', ' \\1', x)
x
gsub('([[:upper:]])', ' \\1', "TheLongAnd")
gsub('([[:upper:]])', ' \\1', directors)
?gsub
gsub('([[:upper:]])', ' \\1', directors, replacement = ",")
gsub('([[:upper:]])', ' \\1', x = directors, replacement = ",")
gsub('([[:upper:]])', ' \\1', x = directors, replacement = " ,")
gsub('([[:upper:]])', ' \\1', x = directors)
gsub('([[:upper:]])', ' \\1', x = directors) %>%
str_squish()
directors
gsub('([[:upper:]])', ' \\1', x = directors) %>%
str_squish()
imdb_top_250 <- tibble(rank = 1:250,
title = titles,
rating = ratings,
director = directors,
writer = writers)
imdb_top_250 %>% View()
?read_html
url <- "https://www.imdb.com/chart/top"
top_movies <- read_html(url)
top_movies
?tibble
knitr::opts_chunk$set(echo = TRUE, message = F, warning = F)
links[1] %>%
read_html() %>%
html_nodes("div.ipc-metadata-list-item__content-container") %>%
html_text() %>%
knitr::kable()
links[1] %>%
read_html() %>%
html_nodes("div.ipc-metadata-list-item__content-container") %>%
html_text()
directors[1:10]
writer[1:10]
writers[1:10]
imdb_top_250 %>% head(10)
knitr::opts_chunk$set(echo = TRUE, message = F, warning = F)
library(rvest)
library(stringr)
library(dplyr)
knitr::opts_chunk$set(echo = TRUE, message = F, warning = F)
knitr::opts_chunk$set(echo = TRUE, message = F, warning = F)
library(rvest)
library(stringr)
library(dplyr)
url <- "https://www.imdb.com/chart/top"
top_movies <- read_html(url)
titles <- top_movies %>%
html_nodes(".titleColumn a") %>%
html_text()
titles <- titles[!titles %in% c("", " ")]
titles[1:10]
years <- top_movies %>%
html_nodes(".secondaryInfo") %>%
html_text() %>%
str_sub(2,-2) %>%
as.integer()
years
ratings <- top_movies %>%
html_nodes("strong") %>%
html_text() %>%
as.numeric()
ratings
directors
pat <- "(?<=[[:lower:]])(?=[[:upper:][:digit:](])"
str_split(directors, pat, perl=TRUE)
str_split(directors, pat)
directors %>%
str_split("(?<=[[:lower:]])(?=[[:upper:][:digit:](])")
directors %>%
str_split("(?<=[[:lower:]])(?=[[:upper:][:digit:](])") %>%
unlist()
directors %>%
str_split("(?<=[[:lower:]])(?=[[:upper:][:digit:](])") %>%
unlist() %>%
str_replace_all("\\([^()]+\\)", ", ") %>%
str_squish() %>%
str_sub(1, -2)
directors %>%
str_split("(?<=[[:lower:]])(?=[[:upper:][:digit:](])") %>%
unlist() %>%
str_replace_all("\\([^()]+\\)", ", ")
directors %>%
str_split("(?<=[[:lower:]])(?=[[:upper:][:digit:](])") %>%
unlist() %>%
str_replace_all("\\([^()]+\\)", "")
directors %>%
str_split("(?<=[[:lower:]])(?=[[:upper:][:digit:](])") %>%
str_replace_all("\\([^()]+\\)", "")
directors %>%
str_split("(?<=[[:lower:]])(?=[[:upper:][:digit:](])") #%>%
directors %>%
str_replace_all("\\([^()]+\\)", "")
directors %>%
str_replace_all("\\([^()]+\\)", "") %>% length()
directors %>%
str_replace_all("\\([^()]+\\)", "")
directors %>%
str_replace_all("\\([^()]+\\)", "") %>%
str_split("(?<=[[:lower:]])(?=[[:upper:][:digit:](])")
directors %>%
str_replace_all("\\([^()]+\\)", "") %>%
str_split("(?<=[[:lower:]])(?=[[:upper:][:digit:](])") %>%
unlist()
directors %>%
str_replace_all("\\([^()]+\\)", "") %>%
str_split("(?<=[[:lower:]])(?=[[:upper:][:digit:](])")
?unlist
directors %>%
str_replace_all("\\([^()]+\\)", "") %>%
str_split("(?<=[[:lower:]])(?=[[:upper:][:digit:](])") %>%
unlist(recursive = F)
directors %>%
str_replace_all("\\([^()]+\\)", " ") %>%
str_split("(?<=[[:lower:]])(?=[[:upper:][:digit:](])") %>%
unlist(recursive = F) %>% length()
directors %>%
str_replace_all("\\([^()]+\\)", " ") %>%
str_split("(?<=[[:lower:]])(?=[[:upper:][:digit:](])") %>%
unlist(recursive = T) %>% length()
directors %>%
str_replace_all("\\([^()]+\\)", " ") %>%
str_split("(?<=[[:lower:]])(?=[[:upper:][:digit:](])")
dir_list <- directors %>%
str_replace_all("\\([^()]+\\)", " ") %>%
str_split("(?<=[[:lower:]])(?=[[:upper:][:digit:](])")
dir_list
return(dir)
dir_unlist <- dir
dir_unlist <- dir
rm(dir_unlist)
lapply(dir_list, function(dir) {
dir_unlist <- dir
})
y <- lapply(dir_list, function(dir) {
dir_unlist <- dir
return(dir_unlist)
})
y
dir_list
y <- lapply(dir_list, function(dir) {
dir_unlist <- append(dir_unlist, dir)
return(dir_unlist)
})
dir_unlist <- c()
y <- lapply(dir_list, function(dir) {
dir_unlist <- append(dir_unlist, dir)
return(dir_unlist)
})
dir_unlist
y
dir_list <- directors %>%
str_replace_all("\\([^()]+\\)", " ") %>%
str_split("(?<=[[:lower:]])(?=[[:upper:][:digit:](])")
dir_list
rm(y, pat)
directors %>%
str_replace_all("\\([^()]+\\)", " ") %>%
str_split("(?<=[[:lower:]])(?=[[:upper:][:digit:](])")
?str_split
directors %>%
str_replace_all("\\([^()]+\\)", " ") %>%
str_split("(?<=[[:lower:]])(?=[[:upper:][:digit:](])", n =1)
directors %>%
str_replace_all("\\([^()]+\\)", " ") %>%
str_split("(?<=[[:lower:]])(?=[[:upper:][:digit:](])")
?strsplit()
directors %>%
str_replace_all("\\([^()]+\\)", " ") %>%
strsplit("(?<=[[:lower:]])(?=[[:upper:][:digit:](])", perl = T)
directors %>%
str_replace_all("\\([^()]+\\)", " ") %>%
str_split("(?<=[[:lower:]])(?=[[:upper:][:digit:](])")
dir_list
dir_list[[1]]
dir_list[[10]]
dir_list[[16]]
dir_list <- directors %>%
str_replace_all("\\([^()]+\\)", " ") %>%
str_split("(?<=[[:lower:]])(?=[[:upper:][:digit:](])")
lapply(1:250, function(x) {
dir_list[[x]]
})
lapply(1:250, function(x) {
dir_list[[x]] %>% unlist()
})
lapply(1:250, function(x) {
return(dir_list[[x]] %>% unlist())
})
dir_list[[16]]
dir_unlist <- lapply(1:250, function(x) {
return(dir_list[[x]] %>% unlist())
})
dir_unlist
dir_unlist[[16]]
dir_list[[16]]
dir_unlist %>% unlist()
dir_unlist <- lapply(1:250, function(x) {
return(dir_list[[x]])
})
dir_unlist
dir_list
dir_list[16]
dir_list[[16]]
dir_list[[16]] %>% length()
dir_list[[16]][1]
dir_list[[16]][2]
?paste
paste(dir_list[[16]][1],dir_list[[16]][2],sep=",")
paste(dir_list[[16]][1],dir_list[[16]][2],sep=", ")
paste(dir_list[[16]][1],dir_list[[16]][2],dir_list[[16]][3],sep=",")
lapply(1:250, function(x) {
if (length(dir_list[[x]]) == 2) {
paste(dir_list[[x]][1], dir_list[[x]][2]), sep = ", ")
lapply(1:250, function(x) {
if (length(dir_list[[x]]) == 2) {
paste(dir_list[[x]][1], dir_list[[x]][2], sep = ", ")
}
})
dir_list
dir_list %>% length()
lapply(dir_list, function(dir){length(dir)})
lapply(dir_list, function(dir){length(dir)}) %>% unlist()
lapply(1:250, function(x) {
if (length(dir_list[[x]]) == 2) {
paste(dir_list[[x]][1], dir_list[[x]][2], sep = ", ")
} else if (length(dir_list[[x]]) == 3) {
paste(dir_list[[x]][1], dir_list[[x]][2], dir_list[[x]][3], sep = ", ")
} else {
dir_list[[x]]
}
})
lapply(1:250, function(x) {
if (length(dir_list[[x]]) == 2) {
paste(dir_list[[x]][1], dir_list[[x]][2], sep = ", ")
} else if (length(dir_list[[x]]) == 3) {
paste(dir_list[[x]][1], dir_list[[x]][2], dir_list[[x]][3], sep = ", ")
} else {
dir_list[[x]]
}
}) %>%
unlist()
directors[1:10]
directors
directors[16]
directors[1:16]
directors[1:20]
directors[1:16]
# First, I replaced strings within () with a whitespace
# Then I split the strings where a lowercase letter is next to an uppercase letter.
directors <- directors %>%
str_replace_all("\\([^()]+\\)", " ") %>%
str_split("(?<=[[:lower:]])(?=[[:upper:][:digit:](])")
# This chunk of code is an attempt to unlist the `directors` variable
# which turned out to be not so simple task.
directors <- lapply(1:250, function(x) {
if (length(directors[[x]]) == 2) {
paste(directors[[x]][1], directors[[x]][2], sep = ", ")
} else if (length(directors[[x]]) == 3) {
paste(directors[[x]][1], directors[[x]][2], directors[[x]][3], sep = ", ")
} else {
directors[[x]]
}
}) %>%
unlist()
directors[1:16]
imdb_top_250 %>% head(10) %>% knitr::kable()
